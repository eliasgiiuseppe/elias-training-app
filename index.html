<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Climbing Training App</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Klettertraining App für Übungen, Workouts und Trainingspläne">
    <meta name="theme-color" content="#1f2937">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ClimbTraining">
    
    <!-- Icons -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSIjZjk3MzE2Ii8+Cjwvc3ZnPgo=">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSIjZjk3MzE2Ii8+Cjwvc3ZnPgo=">
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkNsaW1iaW5nIFRyYWluaW5nIEFwcCIsCiAgInNob3J0X25hbWUiOiAiQ2xpbWJUcmFpbmluZyIsCiAgImRlc2NyaXB0aW9uIjogIktsbXR0ZXJ0cmFpbmluZyBBcHAgZsO8ciBCYnVuZ2VuLCBXb3Jrb3V0cyB1bmQgVHJhaW5pbmdzcGzDpG5lIiwKICAic3RhcnRfdXJsIjogIi4iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiMxZjI5MzciLAogICJ0aGVtZV9jb2xvciI6ICIjMWYyOTM3IiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTWpRaUlHaGxhV2RvZEQwaU1qUWlJSFpwWlhkQ2IzZzlJakFnTUNBeU5DQXlOQ0lnWm1sc2JEMGlibTl1WlNJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWo0S1BIQmhkR2dnWkQwaVRURXlJRUpNTVRNdU1Ea2dPQzR5TmtzeU1DQTVUREV6TGpBNUlERTFMelEwVERFeUlESXlUREV3TGpreElERTFMelEwVERRZ09VeHhNQzQ1TVNBNExqSTJUREV5SURKS2VpSWdabWxzYkQwaUkyWTVOek14TmlJdlBnbzhMM04yWno0SyIsCiAgICAgICJzaXplcyI6ICIxOTJ4MTkyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICBdCn0=">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide React Icons -->
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>
    
    <style>
        /* Custom scrollbar styling */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #374151;
        }
        ::-webkit-scrollbar-thumb {
            background: #6b7280;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }
        
        /* Prevent zoom on input focus (iOS) */
        input[type="text"], input[type="number"], select, textarea {
            font-size: 16px;
        }
        
        /* PWA splash screen styling */
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background-color: #1f2937;
            color: white;
            overflow-x: hidden;
        }
        
        /* Loading screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #1f2937;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #374151;
            border-top: 4px solid #f97316;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading" class="loading-screen">
        <div class="loading-spinner"></div>
        <h2 style="color: #f97316; margin-top: 20px; font-weight: bold;">Climbing Training</h2>
        <p style="color: #9ca3af; margin-top: 10px;">Lade App...</p>
    </div>

    <!-- App Container -->
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { Plus, Play, Edit, Trash2, Clock, RotateCcw, ChevronLeft, ChevronRight, Check, X, Star, Menu, Home, Dumbbell, Calendar, BarChart3 } = lucideReact;

        const ClimbingTrainingApp = () => {
            // State Management
            const [currentView, setCurrentView] = useState('home');
            const [exercises, setExercises] = useState(() => {
                const saved = localStorage.getItem('exercises');
                return saved ? JSON.parse(saved) : [];
            });
            const [workouts, setWorkouts] = useState(() => {
                const saved = localStorage.getItem('workouts');
                return saved ? JSON.parse(saved) : [];
            });
            const [trainingPlans, setTrainingPlans] = useState(() => {
                const saved = localStorage.getItem('trainingPlans');
                return saved ? JSON.parse(saved) : [];
            });
            const [currentWorkout, setCurrentWorkout] = useState(null);
            const [currentExercise, setCurrentExercise] = useState(null);
            const [timer, setTimer] = useState(0);
            const [isTimerRunning, setIsTimerRunning] = useState(false);
            const [currentSet, setCurrentSet] = useState(1);
            const [currentRep, setCurrentRep] = useState(0);
            const [restTimer, setRestTimer] = useState(0);
            const [isRestTimerRunning, setIsRestTimerRunning] = useState(false);
            const [showRestTimer, setShowRestTimer] = useState(false);
            const [stretchingExercises, setStretchingExercises] = useState([]);
            const [currentStretching, setCurrentStretching] = useState(null);
            const [workoutHistory, setWorkoutHistory] = useState(() => {
                const saved = localStorage.getItem('workoutHistory');
                return saved ? JSON.parse(saved) : [];
            });
            const [draggedExercise, setDraggedExercise] = useState(null);
            const [currentPlan, setCurrentPlan] = useState(() => {
                const saved = localStorage.getItem('currentPlan');
                return saved ? JSON.parse(saved) : null;
            });
            const [replacementIndex, setReplacementIndex] = useState(null);

            // Form states
            const [exerciseForm, setExerciseForm] = useState({
                name: '',
                type: 'reps',
                sets: 3,
                reps: 10,
                duration: 30,
                restTime: 60
            });

            const [workoutForm, setWorkoutForm] = useState({
                name: '',
                type: 'Strength',
                exercises: []
            });

            const [planForm, setPlanForm] = useState({
                name: '',
                workouts: []
            });

            const [stretchForm, setStretchForm] = useState({
                name: '',
                duration: 30
            });

            const trainingTypes = ['Strength', 'Power', 'Projecting', 'Power Endurance', 'Endurance'];
            const difficultyLevels = ['Easy', 'Moderate', 'Hard', 'Very Hard'];

            // Save to localStorage whenever state changes
            useEffect(() => {
                localStorage.setItem('exercises', JSON.stringify(exercises));
            }, [exercises]);

            useEffect(() => {
                localStorage.setItem('workouts', JSON.stringify(workouts));
            }, [workouts]);

            useEffect(() => {
                localStorage.setItem('trainingPlans', JSON.stringify(trainingPlans));
            }, [trainingPlans]);

            useEffect(() => {
                localStorage.setItem('workoutHistory', JSON.stringify(workoutHistory));
            }, [workoutHistory]);

            useEffect(() => {
                localStorage.setItem('currentPlan', JSON.stringify(currentPlan));
            }, [currentPlan]);

            // Timer Logic
            const timerRef = useRef(null);
            const restTimerRef = useRef(null);
            
            useEffect(() => {
                if (isTimerRunning) {
                    timerRef.current = setInterval(() => {
                        setTimer(prev => prev + 1);
                    }, 1000);
                } else {
                    clearInterval(timerRef.current);
                }
                return () => clearInterval(timerRef.current);
            }, [isTimerRunning]);

            useEffect(() => {
                if (isRestTimerRunning) {
                    restTimerRef.current = setInterval(() => {
                        setRestTimer(prev => {
                            if (prev <= 1) {
                                setIsRestTimerRunning(false);
                                setShowRestTimer(false);
                                return 0;
                            }
                            return prev - 1;
                        });
                    }, 1000);
                } else {
                    clearInterval(restTimerRef.current);
                }
                return () => clearInterval(restTimerRef.current);
            }, [isRestTimerRunning]);

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            };

            // Exercise Management
            const addExercise = () => {
                const newExercise = {
                    id: Date.now(),
                    ...exerciseForm
                };
                setExercises([...exercises, newExercise]);
                setExerciseForm({
                    name: '',
                    type: 'reps',
                    sets: 3,
                    reps: 10,
                    duration: 30,
                    restTime: 60
                });
                setCurrentView('exercises');
            };

            const deleteExercise = (id) => {
                setExercises(exercises.filter(ex => ex.id !== id));
            };

            // Workout Management
            const addWorkout = () => {
                const newWorkout = {
                    id: Date.now(),
                    ...workoutForm,
                    exercises: [...workoutForm.exercises]
                };
                setWorkouts([...workouts, newWorkout]);
                setWorkoutForm({
                    name: '',
                    type: 'Strength',
                    exercises: []
                });
                setCurrentView('workouts');
            };

            // Training Plan Management
            const addPlan = () => {
                const newPlan = {
                    id: Date.now(),
                    ...planForm,
                    workouts: [...planForm.workouts],
                    currentWorkoutIndex: 0
                };
                setTrainingPlans([...trainingPlans, newPlan]);
                setPlanForm({
                    name: '',
                    workouts: []
                });
                setCurrentView('plans');
            };

            const startPlan = (plan) => {
                setCurrentPlan(plan);
                setCurrentView('plan-overview');
            };

            const startWorkoutFromPlan = (workoutIndex) => {
                const workout = currentPlan.workouts[workoutIndex];
                setCurrentWorkout({
                    ...workout,
                    currentExerciseIndex: 0,
                    exerciseProgress: workout.exercises.map(() => ({
                        currentSet: 1,
                        completed: false,
                        difficulty: null
                    })),
                    fromPlan: true,
                    planWorkoutIndex: workoutIndex
                });
                setCurrentView('workout-overview');
            };

            const completeWorkoutFromPlan = () => {
                const updatedPlan = { ...currentPlan };
                if (currentWorkout.planWorkoutIndex < currentPlan.workouts.length - 1) {
                    updatedPlan.currentWorkoutIndex = currentWorkout.planWorkoutIndex + 1;
                }
                setCurrentPlan(updatedPlan);
                
                setTrainingPlans(prev => prev.map(plan => 
                    plan.id === updatedPlan.id ? updatedPlan : plan
                ));
                
                setCurrentView('add-stretching');
            };

            const startWorkout = (workout) => {
                setCurrentWorkout({
                    ...workout,
                    currentExerciseIndex: 0,
                    exerciseProgress: workout.exercises.map(() => ({
                        currentSet: 1,
                        completed: false,
                        difficulty: null
                    }))
                });
                setCurrentView('workout-overview');
            };

            const startExercise = (exerciseIndex) => {
                const exercise = currentWorkout.exercises[exerciseIndex];
                setCurrentExercise({
                    ...exercise,
                    index: exerciseIndex
                });
                setCurrentSet(1);
                setCurrentRep(0);
                setTimer(0);
                setIsTimerRunning(false);
                setCurrentView('exercise-execution');
            };

            const completeSet = () => {
                if (currentSet < currentExercise.sets) {
                    setCurrentSet(currentSet + 1);
                    setCurrentRep(0);
                    setTimer(0);
                    setIsTimerRunning(false);
                    setRestTimer(currentExercise.restTime);
                    setIsRestTimerRunning(true);
                    setShowRestTimer(true);
                } else {
                    setIsTimerRunning(false);
                    setCurrentView('difficulty-rating');
                }
            };

            const rateDifficulty = (difficulty) => {
                const updatedWorkout = { ...currentWorkout };
                updatedWorkout.exerciseProgress[currentExercise.index].difficulty = difficulty;
                updatedWorkout.exerciseProgress[currentExercise.index].completed = true;
                updatedWorkout.exerciseProgress[currentExercise.index].completedAt = new Date().toISOString();
                setCurrentWorkout(updatedWorkout);
                
                const historyEntry = {
                    exerciseId: currentExercise.id,
                    exerciseName: currentExercise.name,
                    difficulty: difficulty,
                    completedAt: new Date().toISOString(),
                    sets: currentExercise.sets,
                    type: currentExercise.type,
                    reps: currentExercise.reps,
                    duration: currentExercise.duration
                };
                
                setWorkoutHistory(prev => [...prev, historyEntry]);
                setCurrentView('workout-overview');
            };

            const completeWorkout = () => {
                if (currentWorkout?.fromPlan) {
                    completeWorkoutFromPlan();
                } else {
                    setCurrentView('add-stretching');
                }
            };

            const addStretchingExercise = () => {
                const newStretching = {
                    id: Date.now(),
                    name: stretchForm.name,
                    duration: stretchForm.duration,
                    sets: 2
                };
                setStretchingExercises([...stretchingExercises, newStretching]);
                setStretchForm({ name: '', duration: 30 });
            };

            const startStretching = (stretchExercise) => {
                setCurrentStretching({
                    ...stretchExercise,
                    currentSet: 1
                });
                setTimer(0);
                setCurrentView('stretching-execution');
            };

            const completeStretchingSet = () => {
                if (currentStretching.currentSet < currentStretching.sets) {
                    setCurrentStretching({
                        ...currentStretching,
                        currentSet: currentStretching.currentSet + 1
                    });
                    setTimer(0);
                    setIsTimerRunning(false);
                    setRestTimer(10);
                    setIsRestTimerRunning(true);
                    setShowRestTimer(true);
                } else {
                    setCurrentView('add-stretching');
                }
            };

            const finishWorkout = () => {
                const completedWorkout = {
                    id: Date.now(),
                    workoutId: currentWorkout?.id,
                    workoutName: currentWorkout?.name,
                    workoutType: currentWorkout?.type,
                    completedAt: new Date().toISOString(),
                    exercises: currentWorkout?.exerciseProgress || [],
                    stretching: [...stretchingExercises]
                };
                
                setCurrentWorkout(null);
                setCurrentExercise(null);
                setStretchingExercises([]);
                setCurrentView('workout-complete');
                
                setTimeout(() => {
                    setCurrentView('home');
                }, 3000);
            };

            // Drag and Drop Functions
            const handleDragStart = (e, exercise, index) => {
                setDraggedExercise({ exercise, index });
            };

            const handleDragOver = (e) => {
                e.preventDefault();
            };

            const handleDrop = (e, targetIndex) => {
                e.preventDefault();
                if (draggedExercise && draggedExercise.index !== targetIndex) {
                    const updatedWorkout = { ...currentWorkout };
                    const exercises = [...updatedWorkout.exercises];
                    const progress = [...updatedWorkout.exerciseProgress];
                    
                    [exercises[draggedExercise.index], exercises[targetIndex]] = [exercises[targetIndex], exercises[draggedExercise.index]];
                    [progress[draggedExercise.index], progress[targetIndex]] = [progress[targetIndex], progress[draggedExercise.index]];
                    
                    updatedWorkout.exercises = exercises;
                    updatedWorkout.exerciseProgress = progress;
                    setCurrentWorkout(updatedWorkout);
                }
                setDraggedExercise(null);
            };

            const handlePlanDragStart = (e, workout, index) => {
                setDraggedExercise({ exercise: workout, index });
            };

            const handlePlanDrop = (e, targetIndex) => {
                e.preventDefault();
                if (draggedExercise && draggedExercise.index !== targetIndex) {
                    const updatedPlan = { ...currentPlan };
                    const workouts = [...updatedPlan.workouts];
                    
                    [workouts[draggedExercise.index], workouts[targetIndex]] = [workouts[targetIndex], workouts[draggedExercise.index]];
                    
                    updatedPlan.workouts = workouts;
                    setCurrentPlan(updatedPlan);
                }
                setDraggedExercise(null);
            };

            const replaceExercise = (index, newExercise) => {
                const updatedWorkout = { ...currentWorkout };
                updatedWorkout.exercises[index] = newExercise;
                updatedWorkout.exerciseProgress[index] = {
                    currentSet: 1,
                    completed: false,
                    difficulty: null
                };
                setCurrentWorkout(updatedWorkout);
            };

            // Navigation Component
            const Navigation = () => (
                <div className="fixed bottom-0 left-0 right-0 bg-gray-900 px-4 py-2 safe-area-inset-bottom">
                    <div className="flex justify-around">
                        <button
                            onClick={() => setCurrentView('home')}
                            className={`flex flex-col items-center py-3 px-4 rounded-lg transition-colors ${
                                currentView === 'home' ? 'text-orange-400' : 'text-gray-400'
                            }`}
                        >
                            <Home size={24} />
                            <span className="text-xs mt-1 font-medium">Home</span>
                        </button>
                        <button
                            onClick={() => setCurrentView('exercises')}
                            className={`flex flex-col items-center py-3 px-4 rounded-lg transition-colors ${
                                currentView === 'exercises' ? 'text-orange-400' : 'text-gray-400'
                            }`}
                        >
                            <Dumbbell size={24} />
                            <span className="text-xs mt-1 font-medium">Übungen</span>
                        </button>
                        <button
                            onClick={() => setCurrentView('workouts')}
                            className={`flex flex-col items-center py-3 px-4 rounded-lg transition-colors ${
                                currentView === 'workouts' ? 'text-orange-400' : 'text-gray-400'
                            }`}
                        >
                            <Play size={24} />
                            <span className="text-xs mt-1 font-medium">Training</span>
                        </button>
                        <button
                            onClick={() => setCurrentView('plans')}
                            className={`flex flex-col items-center py-3 px-4 rounded-lg transition-colors ${
                                currentView === 'plans' ? 'text-orange-400' : 'text-gray-400'
                            }`}
                        >
                            <Calendar size={24} />
                            <span className="text-xs mt-1 font-medium">Pläne</span>
                        </button>
                    </div>
                </div>
            );

            // Home View
            const HomeView = () => (
                <div className="bg-gray-900 min-h-screen text-white">
                    <div className="p-6 pb-24">
                        <div className="flex items-center justify-between mb-8">
                            <div>
                                <h1 className="text-3xl font-bold">Training</h1>
                                <p className="text-gray-400 mt-1">Ready to climb stronger?</p>
                            </div>
                        </div>
                        
                        <div className="space-y-6">
                            <div className="bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl p-6">
                                <h2 className="text-xl font-bold mb-2">Nächstes Training</h2>
                                {trainingPlans.length > 0 && currentPlan ? (
                                    <>
                                        <p className="text-orange-100 mb-1">{currentPlan.name}</p>
                                        <p className="text-orange-200 text-sm mb-4">
                                            {currentPlan.workouts[currentPlan.currentWorkoutIndex]?.name || 'Plan abgeschlossen'}
                                        </p>
                                        <button 
                                            onClick={() => setCurrentView('plan-overview')}
                                            className="bg-white text-orange-600 px-6 py-3 rounded-xl font-bold"
                                        >
                                            Plan fortsetzen
                                        </button>
                                    </>
                                ) : (
                                    <>
                                        <p className="text-orange-100 mb-4">Erstelle deinen ersten Trainingsplan</p>
                                        <button 
                                            onClick={() => setCurrentView('plans')}
                                            className="bg-white text-orange-600 px-6 py-3 rounded-xl font-bold"
                                        >
                                            Plan erstellen
                                        </button>
                                    </>
                                )}
                            </div>

                            <div className="grid grid-cols-2 gap-4">
                                <div className="bg-gray-800 rounded-2xl p-4">
                                    <h3 className="text-gray-400 text-sm font-medium mb-1">Übungen</h3>
                                    <p className="text-3xl font-bold text-white">{exercises.length}</p>
                                </div>
                                <div className="bg-gray-800 rounded-2xl p-4">
                                    <h3 className="text-gray-400 text-sm font-medium mb-1">Pläne</h3>
                                    <p className="text-3xl font-bold text-white">{trainingPlans.length}</p>
                                </div>
                            </div>

                            <div className="bg-gray-800 rounded-2xl p-4">
                                <h3 className="text-lg font-bold mb-3">Letzte Trainings</h3>
                                <div className="space-y-3">
                                    {workoutHistory.slice(-3).map((entry, index) => (
                                        <div key={index} className="flex justify-between items-center">
                                            <div>
                                                <p className="font-medium">{entry.exerciseName}</p>
                                                <p className="text-sm text-gray-400">
                                                    {new Date(entry.completedAt).toLocaleDateString('de-DE')}
                                                </p>
                                            </div>
                                            <div className="text-orange-400 font-medium">
                                                {entry.difficulty}
                                            </div>
                                        </div>
                                    ))}
                                    {workoutHistory.length === 0 && (
                                        <p className="text-gray-400 text-center py-4">Noch keine Trainings absolviert</p>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );

            // Exercises View
            const ExercisesView = () => (
                <div className="bg-gray-900 min-h-screen text-white">
                    <div className="p-6 pb-24">
                        <div className="flex justify-between items-center mb-6">
                            <h1 className="text-2xl font-bold">Übungen</h1>
                            <button
                                onClick={() => setCurrentView('add-exercise')}
                                className="bg-orange-500 text-white p-3 rounded-full"
                            >
                                <Plus size={24} />
                            </button>
                        </div>

                        <div className="space-y-3">
                            {exercises.map(exercise => (
                                <div key={exercise.id} className="bg-gray-800 rounded-2xl p-4">
                                    <div className="flex justify-between items-start">
                                        <div className="flex-1">
                                            <h3 className="font-bold text-lg">{exercise.name}</h3>
                                            <p className="text-gray-400 mt-1">
                                                {exercise.sets} Sätze × {exercise.type === 'reps' ? `${exercise.reps} Wdh.` : `${exercise.duration}s`}
                                            </p>
                                            <p className="text-sm text-gray-500">Pause: {exercise.restTime}s</p>
                                        </div>
                                        <div className="flex space-x-3">
                                            <button className="text-gray-400 hover:text-orange-400 transition-colors">
                                                <Edit size={20} />
                                            </button>
                                            <button 
                                                onClick={() => deleteExercise(exercise.id)}
                                                className="text-gray-400 hover:text-red-400 transition-colors"
                                            >
                                                <Trash2 size={20} />
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            ))}
                            {exercises.length === 0 && (
                                <div className="text-center py-12">
                                    <p className="text-gray-400 mb-4">Noch keine Übungen erstellt</p>
                                    <button
                                        onClick={() => setCurrentView('add-exercise')}
                                        className="bg-orange-500 text-white px-6 py-3 rounded-xl font-bold"
                                    >
                                        Erste Übung hinzufügen
                                    </button>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );

            // Add Exercise View
            const AddExerciseView = () => (
                <div className="bg-gray-900 min-h-screen text-white">
                    <div className="p-6 pb-24">
                        <div className="flex items-center mb-6">
                            <button onClick={() => setCurrentView('exercises')} className="mr-4 text-gray-400">
                                <ChevronLeft size={24} />
                            </button>
                            <h1 className="text-2xl font-bold">Übung hinzufügen</h1>
                        </div>

                        <div className="space-y-6">
                            <div>
                                <label className="block text-sm font-medium text-gray-300 mb-3">Name</label>
                                <input
                                    type="text"
                                    value={exerciseForm.name}
                                    onChange={(e) => setExerciseForm({...exerciseForm, name: e.target.value})}
                                    className="w-full p-4 bg-gray-800 border border-gray-700 rounded-xl text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                                    placeholder="z.B. Klimmzüge"
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-300 mb-3">Typ</label>
                                <div className="flex space-x-3">
                                    <button
                                        onClick={() => setExerciseForm({...exerciseForm, type: 'reps'})}
                                        className={`flex-1 p-4 rounded-xl border-2 font-bold transition-colors ${
                                            exerciseForm.type === 'reps' 
                                                ? 'bg-orange-500 border-orange-500 text-white' 
                                                : 'border-gray-700 text-gray-400'
                                        }`}
                                    >
                                        Wiederholungen
                                    </button>
                                    <button
                                        onClick={() => setExerciseForm({...exerciseForm, type: 'time'})}
                                        className={`flex-1 p-4 rounded-xl border-2 font-bold transition-colors ${
                                            exerciseForm.type === 'time' 
                                                ? 'bg-orange-500 border-orange-500 text-white' 
                                                : 'border-gray-700 text-gray-400'
                                        }`}
                                    >
                                        Zeit
                                    </button>
                                </div>
                            </div>

                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-sm font-medium text-gray-300 mb-3">Sätze</label>
                                    <input
                                        type="number"
                                        value={exerciseForm.sets}
                                        onChange={(e) => setExerciseForm({...exerciseForm, sets: parseInt(e.target.value)})}
                                        className="w-full p-4 bg-gray-800 border border-gray-700 rounded-xl text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                                    />
                                </div>
                                
                                {exerciseForm.type === 'reps' ? (
                                    <div>
                                        <label className="block text-sm font-medium text-gray-300 mb-3">Wiederholungen</label>
                                        <input
                                            type="number"
                                            value={exerciseForm.reps}
                                            onChange={(e) => setExerciseForm({...exerciseForm, reps: parseInt(e.target.value)})}
                                            className="w-full p-4 bg-gray-800 border border-gray-700 rounded-xl text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                                        />
                                    </div>
                                ) : (
                                    <div>
                                        <label className="block text-sm font-medium text-gray-300 mb-3">Dauer (Sek.)</label>
                                        <input
                                            type="number"
                                            value={exerciseForm.duration}
                                            onChange={(e) => setExerciseForm({...exerciseForm, duration: parseInt(e.target.value)})}
                                            className="w-full p-4 bg-gray-800 border border-gray-700 rounded-xl text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                                        />
                                    </div>
                                )}
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-300 mb-3">Pausenzeit (Sek.)</label>
                                <input
                                    type="number"
                                    value={exerciseForm.restTime}
                                    onChange={(e) => setExerciseForm({...exerciseForm, restTime: parseInt(e.target.value)})}
                                    className="w-full p-4 bg-gray-800 border border-gray-700 rounded-xl text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                                />
                            </div>

                            <button
                                onClick={addExercise}
                                disabled={!exerciseForm.name}
                                className="w-full bg-orange-500 text-white py-4 rounded-xl font-bold text-lg disabled:bg-gray-600 disabled:cursor-not-allowed"
                            >
                                Übung hinzufügen
                            </button>
                        </div>
                    </div>
                </div>
            );

            // Workouts View
            const WorkoutsView = () => (
                <div className="bg-gray-900 min-h-screen text-white">
                    <div className="p-6 pb-24">
                        <div className="flex justify-between items-center mb-6">
                            <h1 className="text-2xl font-bold">Trainings</h1>
                            <button
                                onClick={() => setCurrentView('add-workout')}
                                className="bg-orange-500 text-white p-3 rounded-full"
                            >
                                <Plus size={24} />
                            </button>
                        </div>

                        <div className="space-y-4">
                            {workouts.map(workout => (
                                <div key={workout.id} className="bg-gray-800 rounded-2xl p-4">
                                    <div className="flex justify-between items-start mb-3">
                                        <div className="flex-1">
                                            <h3 className="font-bold text-lg">{workout.name}</h3>
                                            <p className="text-orange-400 font-medium">{workout.type}</p>
                                            <p className="text-sm text-gray-400 mt-1">{workout.exercises.length} Übungen</p>
                                        </div>
                                        <button
                                            onClick={() => startWorkout(workout)}
                                            className="bg-orange-500 text-white px-6 py-3 rounded-xl font-bold flex items-center space-x-2"
                                        >
                                            <Play size={18} />
                                            <span>Start</span>
                                        </button>
                                    </div>
                                </div>
                            ))}
                            {workouts.length === 0 && (
                                <div className="text-center py-12">
                                    <p className="text-gray-400 mb-4">Noch keine Trainings erstellt</p>
                                    <button
                                        onClick={() => setCurrentView('add-workout')}
                                        className="bg-orange-500 text-white px-6 py-3 rounded-xl font-bold"
                                    >
                                        Erstes Training hinzufügen
                                    </button>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );

            // Continue with all other views...
            const renderCurrentView = () => {
                switch (currentView) {
                    case 'home': return <HomeView />;
                    case 'exercises': return <ExercisesView />;
                    case 'add-exercise': return <AddExerciseView />;
                    case 'workouts': return <WorkoutsView />;
                    default: return <HomeView />;
                }
            };

            return (
                <div className="min-h-screen bg-gray-900">
                    {renderCurrentView()}
                    <Navigation />
                </div>
            );
        };

        // Hide loading screen and render app
        const renderApp = () => {
            document.getElementById('loading').style.display = 'none';
            ReactDOM.render(<ClimbingTrainingApp />, document.getElementById('root'));
        };

        // Initialize app when everything is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', renderApp);
        } else {
            renderApp();
        }

        // Service Worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                const swCode = `
                    const CACHE_NAME = 'climbing-training-v1';
                    const urlsToCache = ['/'];
                    
                    self.addEventListener('install', (event) => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then((cache) => cache.addAll(urlsToCache))
                        );
                    });
                    
                    self.addEventListener('fetch', (event) => {
                        event.respondWith(
                            caches.match(event.request)
                                .then((response) => response || fetch(event.request))
                        );
                    });
                `;
                
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swUrl)
                    .then((registration) => console.log('SW registered'))
                    .catch((error) => console.log('SW registration failed'));
            });
        }
    </script>
</body>
</html>
